<section layout:fragment="content" layout:decorate="~{/fragmentos/layout}" >

	<main role="main" class="col-md-auto ml-sm-auto col-lg-12">
<<<<<<< HEAD

	<div class="container-fluid">
		<!-- INICIO TITULO DA PÁGINA -->
		<div class="row page-titles">
			<div class="col-md-5 align-self-center">
				<h4 class="text-themecolor">PESQUISAR OCORRÊNCIAS</h4>
			</div>
			<div class="col-md-7 align-self-center text-right">
				<div class="d-flex justify-content-end align-items-center">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
						<li class="breadcrumb-item"><a href="javascript:void(0)">Ocorrências</a></li>
						<li class="breadcrumb-item active">Pesquisar</li>
					</ol>
				</div>
			</div>
		</div>


		<div class="row">
			<div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">

				<form id="formPesquisaOcorrencia" class="form-ocorrencia"
					th:object="${ocorrencia}"
					th:action="@{/ocorrencias/visualizar/filtrar}" method="post">

					<div class="ribbon-wrapper card">
						<div class="ribbon ribbon-info">REFERÊNCIAS</div>

						<div class="form-row">
							<div
								class="form-group col-12 col-sm-12 col-md-4 col-lg-2 col-xl-2">
								<label for="sic">Número</label> <input id="sic" type="number"
									class="form-control form-control-sm" name="sic"
									th:field="*{sic}">
							</div>

							<div
								class="form-group col-12 col-sm-12 col-md-8 col-lg-4 col-xl-4">
								<label for="tipificacao">Tipificação</label> <select
									id="tipificacao" name="tipificacao"
									class="form-control form-control-sm liberar" readonly>
									<option hidden="Selecionar" value="">Selecionar</option>
									<option th:each="_tipificacao : ${tipificacoes}"
										name="tipificacao" th:text="${_tipificacao.nome}"
										th:value="${{_tipificacao}}">Selecione</option>
								</select>
							</div>

							<div
								class="form-group col-12 col-sm-12 col-md-4 col-lg-2 col-xl-2">
								<label for="dataOcorrencia">Data Inicial</label> <input
									id="dataInicio" type="text" name="dataInicio" readonly
									class="form-control form-control-sm input-group liberar"
									placeholder="DD/MM/YYYY HH:mm" autocomplete="off">
							</div>

							<div
								class="form-group col-12 col-sm-12 col-md-4 col-lg-2 col-xl-2">
								<label for="dataOcorrencia">Data Final</label> <input
									id="dataFim" type="text" name="dataFim" readonly
									class="form-control form-control-sm input-group liberar"
									placeholder="DD/MM/YYYY HH:mm" autocomplete="off">
=======
		<div class="card">
			<div class="card-body">
				<h5 class="card-title mb-2">Pesquisar Ocorrências</h5>
			
				<form id="formOcorrencia" class="form-ocorrencia" th:object="${ocorrencia}" th:action="@{/ocorrencias/visualizar/filtrar}" method="GET">
					
					<div class="form-group">
					
						<h6>REFERÊNCIAS</h6>
						<div class="form-control form-control-sm">
							<div class="form-row">
								<div class="form-group col-md-2">
									<label for="sic">Número SIC</label> 
									<input id="sic" type="number" class="form-control form-control-sm" name="sic"	placeholder="" th:field="*{sic}">
								</div>
								
								<div class="form-group col-md-6">
									<label for="tipificacao">Tipificação</label>
									<select id="tipificacao" name="tipificacao" class="form-control form-control-sm">
										<option hidden="Selecionar" value="">Selecionar</option>
										<option th:each="_tipificacao : ${tipificacoes}" name="tipificacao" th:text="${_tipificacao.nome}" th:value="${{_tipificacao}}">Selecione</option>
									</select>
								</div>
								
								<div class="form-group col-md-2">
<!-- 									<label for="dataOcorrencia">Data e Hora Início</label> -->
									<label for="dataOcorrencia">Data Inicial</label>
									<input id="dataInicio" type="text" name="dataInicio" readonly class="form-control form-control-sm input-group"  placeholder="DD/MM/YYYY" autocomplete="off">
								</div>
								
								<div class="form-group col-md-2">
<!-- 									<label for="dataOcorrencia">Data e Hora Fim</label> -->
									<label for="dataOcorrencia">Data Final</label>
									<input id="dataFim" type="text" name="dataFim" readonly class="form-control form-control-sm input-group"  placeholder="DD/MM/YYYY" autocomplete="off">
								</div>
>>>>>>> Mauricio
							</div>
						</div>
					</div>

					<div class="ribbon-wrapper card">
						<div class="ribbon ribbon-info">LOCALIZAÇÃO</div>
						<div class="form-row">

							<div th:if="${usuario.estabelecimento.size() > 1}"
								class="form-group col-12 col-sm-12 col-md-8 col-lg-4 col-xl-4">
								<label for="estabelecimento">Estabelecimento</label> <select
									id="estabelecimento" name="estabelecimento"
									class="form-control form-control-sm liberar" required readonly>
									<option value="">Selecionar</option>
									<option th:each="_cicom: ${cicoms}" th:value="${{_cicom.id}}"
										th:text="${_cicom.nome}"></option>
								</select> <span class="fv-help-block"
									th:if="${#fields.hasErrors('endereco.cidade')}"
									th:errors="*{endereco.cidade}"></span>
							</div>
							<div
								class="form-group col-12 col-sm-12 col-md-8 col-lg-4 col-xl-4">
								<label for="cidade">Cidade</label> <select id="cidade"
									name="endereco.cidade"
									class="form-control form-control-sm btn-escolhercidade liberar"
									readonly>
									<option hidden="Selecionar" value="">Selecionar</option>
									<option th:each="_cidade : ${cidades}" th:id="${_cidade.id}"
										th:text="${_cidade.nome}" th:value="${{_cidade}}">Selecione</option>
								</select>
							</div>

							<div
								class="form-group col-12 col-sm-12 col-md-8 col-lg-4 col-xl-4">
								<label for="localidade">Localidade/Distrito</label> <select
									id="localidade" name="endereco.bairro.localidade"
									class="form-control form-control-sm" title="teste"
									th:field="*{endereco.bairro.localidade}" readonly>
									<option value="">Selecionar</option>
								</select>
							</div>

							<div
								class="form-group col-12 col-sm-12 col-md-8 col-lg-4 col-xl-4">
								<label for="bairro">Bairro</label> <select id="bairro"
									name="endereco.bairro" class="form-control form-control-sm"
									title="teste" th:field="*{endereco.bairro}" readonly>
									<option value="">Selecionar</option>
								</select>
							</div>
							<button type="submit" class="btn btn-info">Buscar</button>
							<button id="limpar" class="btn btn-info ml-1">Limpar</button>
						</div>
					</div>

				</form>
			</div>

			<div class="ribbon-wrapper card">
				<div class="ribbon ribbon-info">Resultado da Busca</div>
				<div class="form-row">

					<div class="table-responsive m-t-40">
						<table id="tabela-pesquisaOcorrencia" class="table table-sm table-bordered table-striped">
							<thead>
								<tr>
									<th scope="col">SIC</th>
									<th style='width: 13%;' scope="col">Data/Hora</th>
									<th style='width: 25%;' scope="col">Tipificação</th>
									<th scope="col">Descrição</th>
									<th scope="col">Cidade/Localidade/Bairro</th>
									<!-- <th scope="col">Seleção</th>
							 -->
									<th style='width: 11%;' scope="col">Ação</th>
								</tr>
							</thead>
							<tbody>

								<tr th:each="_ocorrencia : ${ocorrencias}">
									<!-- <tr th:each="_ocorrencia : ${ocorrencias}" th:classappend="${_ocorrencia.enviada} ?   table-enviada : table-default"> -->
									<th scope="row" th:text="${_ocorrencia.sic}"></th>
									<td
										th:text="${#temporals.format(_ocorrencia.dataOcorrencia, 'dd/MM/yyyy HH:mm')}"></td>
									<td th:text="${_ocorrencia.tipificacao.nome}"></td>
									<td
										th:utext="${#strings.unescapeJava(#strings.abbreviate(_ocorrencia.descricao,45))}"></td>
									<td
										th:text="${#strings.capitalize(_ocorrencia.endereco.cidade.nome +'/'+_ocorrencia.endereco.bairro.localidade.nome+'/'+_ocorrencia.endereco.bairro.nome)}"></td>
									<!-- 	<td><input type="checkbox" th:id="${_ocorrencia.id}" class="enviarVarias ocorrenciaSelecionada" th:value="${_ocorrencia.id}" name="listaDeOcorrencias"></td>
								 -->
									<td class="text-center" id="botaoEditar">
										<div class="btn-group" role="group"
											aria-label="Button group with nested dropdown">
											<div class="btn-group" role="group">
												<button id="btnGroupDrop1" type="button"
													class="btn btn-secondary  btn-sm dropdown-toggle"
													data-toggle="dropdown" aria-haspopup="true"
													aria-expanded="false">Ação</button>
												<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
													<a class="dropdown-item" id="" href=""
														th:href="@{~/admin/editar/ocorrencias/{id}(id=${_ocorrencia.id})}"
														data-titulo="Editar Ocorrência" th:id="${_ocorrencia.id}"
														th:inline="text"><i class="far fa-edit"></i> Editar</a> <a
														class="dropdown-item"
														th:href="@{~/admin/ocorrencias/visualizar/{id}(id=${_ocorrencia.id})}"
														data-titulo="Editar Ocorrência" th:id="${_ocorrencia.id}"
														th:inline="text"><i class="far fa-edit"></i>Visualizar</a>
													<a class="dropdown-item" id="" href=""
														th:href="@{~/admin/report/ocorrencia/{id}(id=${_ocorrencia.id})}"
														target="_blank" data-titulo="Imprimir Ocorrência"
														th:id="${_ocorrencia.id}" th:inline="text"><i
														class="fa fa-print"></i> Imprimir</a> <a
														class="dropdown-item btn-whatsapp" id="" href=""
														th:id="${_ocorrencia.id}"><i class="fab fa-whatsapp"></i>
														WhatsApp</a> <a
														class="dropdown-item btn-enviarEmail-ocorrencia" id=""
														href="" data-titulo="Enviar Ocorrência"
														th:id="${_ocorrencia.id}"><i class="far fa-envelope"></i>
														Email</a>
												</div>
											</div>
										</div>
									</td>
								</tr>
							</tbody>
						</table>

						<!-- 	<button type="button" id="btn-enviar-varias-por-email" disabled="disabled" class="btn btn-primary btn-sm btn-enviar-varias-email">Enviar selecionadas por email</button>
					<button type="button" id="btn-enviar-varias-por-whatsapp" disabled="disabled" class="btn btn-primary btn-sm btn-enviar-varias-whatsapp" data-titulo="Enviar ocorrencias selecionadas">Enviar selecionadas por Whatsapp</button>
					<button type="button" id="btn-imprimir-varias" disabled="disabled" class="btn btn-primary btn-sm btn-mprimir-varias">Imprimir selecionadas</button>
					 -->
					</div>

				</div>


			</div>
		</div>
		<div
			th:replace="fragmentos/modal/envioOcorrenciaEmail :: modalEnviarEmail">
		</div>
	</div>
	</main>
</section>